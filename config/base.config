/*
========================================================================================
    Base Nextflow config file
========================================================================================
    Default config options for all compute environments
----------------------------------------------------------------------------------------
*/

process {
	// Default process resources
	cpus          = { 1 * task.attempt }
	memory        = { 6.GB * task.attempt }
	time          = { 4.h * task.attempt }

	errorStrategy = { task.exitStatus in [143, 137, 104, 134, 139] ? 'retry' : 'finish' }
	maxRetries    = 1
	maxErrors     = '-1'

	// Process-specific resource requirements
	withName: FILTER_BAM {
		cpus   = { 2 * task.attempt }
		memory = { 4.GB * task.attempt }
		time   = { 2.h * task.attempt }
	}

	withName: EXTRACT_HAPLOTYPES {
		cpus   = { 4 * task.attempt }
		memory = { 8.GB * task.attempt }
		time   = { 4.h * task.attempt }
	}

	withName: MERGE_HAPLOTYPES {
		cpus   = { 2 * task.attempt }
		memory = { 4.GB * task.attempt }
		time   = { 2.h * task.attempt }
	}

	withName: MULTIPLE_ALIGNMENT {
		cpus   = { 8 * task.attempt }
		memory = { 16.GB * task.attempt }
		time   = { 8.h * task.attempt }
	}
}
